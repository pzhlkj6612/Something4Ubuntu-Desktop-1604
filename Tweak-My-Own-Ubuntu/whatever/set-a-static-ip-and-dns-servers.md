## Whatever

### Set a static IP and DNS servers

*16.04 Only, IPv4 Only*

1. Which interface do I use for my static IP?

```shell
ip address show
```

```
1: enp2s0: <BROADCAST,MULTICAST,UP> mtu 1500 group default qlen 1
    link/ether ff:ff:ff:ff:ff:ff
    inet .../... brd ... scope global dynamic
       valid_lft 666666sec preferred_lft 666666sec
2: lo: <LOOPBACK,UP> mtu 1500 group default qlen 1
    link/loopback 00:00:00:00:00:00
    inet 127.0.0.1/8 brd 127.255.255.255 scope global dynamic
       valid_lft forever preferred_lft forever

...

```

```enp2s0``` is my choice.

2. Configure the network interface

```shell
sudo vi /etc/network/interfaces
```

```
# This file describes the network interfaces available in your system
# and how to activate then. For more information, see interfaces(5).

source /etc/network/interfaces.d/*

# The loopback network interface
auto lo
iface lo inet loopback

# The primary network interface
auto enp2s0
iface enp2s0 inet dhcp
```

Now, ```enp2s0``` is using **D**ynamic **H**ost **C**onfiguration **P**rotocol, we should make some modifications and additions,

```
...
# The primary network interface
auto enp2s0
iface enp2s0 inet static
address xxx.xxx.xxx.xxx(your ip)
netmask xxx.xxx.xxx.xxx
gateway xxx.xxx.xxx.xxx(gateway ip, usually the address of the router)
```

If you want to set the addresses of DNS servers,

```
...
# The primary network interface
auto enp2s0
iface enp2s0 inet static
address xxx.xxx.xxx.xxx
netmask xxx.xxx.xxx.xxx
gateway xxx.xxx.xxx.xxx
dns-nameservers xxx.xxx.xxx.xxx xxx.xxx.xxx.xxx(the first and second DNS server ip)
dns-nameserver xxx.xxx.xxx.xxx(the third DNS server ip)
```

Here is an example,

```
...
# The primary network interface
auto enp2s0
iface enp2s0 inet static
address 192.168.1.100
netmask 255.255.255.0
gateway 192.168.1.1
dns-nameserver 8.8.8.8
dns-nameservers 8.8.4.4 208.69.38.205 114.114.114.114 1.1.1.1
```

PS: **DO NOT** place multiple addresses in `dns-nameserver` line, but in ```dns-nameservers```.

3. Put your settings into effect without reboot system (You'd better reboot it)

```shell
sudo ip address flush enp2s0 && sudo systemctl restart networking.service
```

Then, check IP,

```shell
ip address show
```

```
1: enp2s0: <BROADCAST,MULTICAST,UP> mtu 1500 group default qlen 1
    link/ether ff:ff:ff:ff:ff:ff
    inet 192.168.1.100/24 brd 192.168.1.255 scope global dynamic
    ...

```

Gateway,

```shell
ip route show
```

```
default via 192.168.1.1 dev enp2s0 ...
192.168.1.0/24 dev enp2s0  ...  ...  src 192.168.1.100
```

DNS,

```shell
cat /etc/resolv.conf
```

```
# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
nameserver 8.8.4.4
nameserver 208.69.38.205
nameserver 114.114.114.114
```

<br/>

If something goes wrong, just reboot your system :(

<br/>

Ref:
- [Network configuration on Ubuntu 12.04 - 17.04 \(incl. Ubuntu 16.04 LTS\) # Linux Basics - Set a Static IP on Ubuntu](https://www.howtoforge.com/linux-basics-set-a-static-ip-on-ubuntu#ubuntu-incl-ubuntu-lts)
- [gather-info # How to set a static IP in Ubuntu - Ubuntu Network Configuration](http://www.sudo-juice.com/how-to-set-a-static-ip-in-ubuntu-network-confirguration/#gather-info)
- [networking - Network interface name changes after update to 15.10 - udev changes - Ask Ubuntu](https://askubuntu.com/questions/689070/network-interface-name-changes-after-update-to-15-10-udev-changes)
- [How to Restart Network in Ubuntu Server 16.04](http://www.configserverfirewall.com/ubuntu-linux/ubuntu-restart-network-interface/)
- [networking - Set static IP Ubuntu 16.04 - Ask Ubuntu](https://askubuntu.com/questions/766131/set-static-ip-ubuntu-16-04)
- [ip-addressing # Network Configuration](https://help.ubuntu.com/lts/serverguide/network-configuration.html#ip-addressing)
- [Command-line to list DNS servers used by my system - Ask Ubuntu](https://askubuntu.com/questions/152593/command-line-to-list-dns-servers-used-by-my-system)

Ref++:

- [Network Configuration](https://help.ubuntu.com/lts/serverguide/network-configuration.html)
